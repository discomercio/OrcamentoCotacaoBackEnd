define(["require","exports","../../DtosTs/ProdutosDto/SelectProdInfo","../../FuncoesTs/Itens/Itens","../../UtilTs/MoedaUtils/moedaUtils","../../Services/NovoPepedidoDadosService","../../FuncoesTs/DadosPagto/DadosPagto","../../UtilTs/Constantes/Constantes","../Shared/Error","../../DtosTs/PedidoDto/PercentualMaxDescEComissao","../../DtosTs/ProdutosDto/ProdutoValidadoComEstoqueDto","../../DtosTs/PedidoDto/PedidoDto","../../DtosTs/PedidoDto/FormaPagtoCriacaoDto"],function(o,a,t,e,r,d,i,n,c,s,l,P,m){"use strict";function p(o){var a;"1"==o.toString()?"none"==(a=document.getElementById("Avista")).style.display&&(a.style.display="block"):null!=(a=document.getElementById("Avista"))&&(a.style.display,a.style.display="none"),"5"==o.toString()?"none"==(a=document.getElementById("ParcUnica")).style.display&&(a.style.display="block"):null!=(a=document.getElementById("ParcUnica"))&&(a.style.display,a.style.display="none"),"3"==o.toString()?"none"==(a=document.getElementById("ParcComEntrada")).style.display&&(a.style.display="block"):null!=(a=document.getElementById("ParcComEntrada"))&&(a.style.display,a.style.display="none"),"2"==o.toString()?"none"==(a=document.getElementById("PagtoCartaoInternet")).style.display&&(a.style.display="block"):null!=(a=document.getElementById("PagtoCartaoInternet"))&&(a.style.display,a.style.display="none"),"6"==o.toString()?"none"==(a=document.getElementById("PagtoCartaoMaquineta")).style.display&&(a.style.display="block"):null!=(a=document.getElementById("PagtoCartaoMaquineta"))&&(a.style.display,a.style.display="none")}function u(){var o=lstProdSelecionados.reduce(function(o,a){return o+a.TotalItem},0);$("#totalPedido").text(moedaUtils.formatarMoedaSemPrefixo(o)),$("#totalPedidoInput").val(moedaUtils.formatarMoedaSemPrefixo(o))}function g(){var o=$(".novoProduto").parent(),a=o.children().length;if(a>=4)for(;a>4;a--){"trTotal"!=o.children()[a-1].className&&o.children()[a-1].remove()}indice=0,$("#indice").val(indice)}function v(o,a){var t=null;"NaN"==(t=parseInt($("#indice").val().toString())).toString()&&(t=0,$("indice").val(t)),_(function(){var o=null;"NaN"==(o=parseInt($("#indice").val().toString())).toString()&&(o=0,$("indice").val(o));var a="trProduto_"+o,t=l(),e=$(".novoProduto").html();e=e.replace(/trocarporindex/g,o.toString()),t.html(e),t.removeClass(".novoProduto"),t.addClass(a),$(".trTotal").before(t);var r=l(),d=$(".novoProdutoEstoque").html();r.html(d),r.removeClass(".novoProdutoEstoque"),r.addClass(a),r.css("display","none"),$(".trTotal").before(r);var i=l(),n=$(".novoProdutoQtdeMaxPermitida").html();i.html(n),i.removeClass(".novoProdutoQtdeMaxPermitida"),i.addClass(a),i.css("display","none"),$(".trTotal").before(i);var c=l(),s=$(".novoProdutoAviso").html();function l(){return $("<tr><\tr>")}return c.html(s),c.removeClass(".novoProdutoAviso"),c.addClass(a),c.css("display","none"),$(".trTotal").before(c),o++,$("#indice").val(o),a}(),o),function(o,a){console.log(a);var t=$("<div></div>");t.html(o.Descricao),$('[name="['+a+'].NumProduto"]').text(o.Fabricante+"/"+o.NumProduto+" - "+t.text()),$('[name="['+a+'].NumProduto"]').val(o.NumProduto),$('[name="['+a+'].Fabricante"]').val(o.Fabricante),$('[name="['+a+'].Qtde"]').val(o.Qtde),$('[name="['+a+'].Preco"]').val(moedaUtils.formatarMoedaSemPrefixo(o.Preco)),$('[name="['+a+'].VlLista"]').text(moedaUtils.formatarMoedaSemPrefixo(o.VlLista)),$('[name="['+a+'].VlLista"]').val(moedaUtils.formatarMoedaSemPrefixo(o.VlLista)),$('[name="['+a+'].Desconto"]').val(moedaUtils.formatarMoedaSemPrefixo(o.Desconto));$('[name="['+a+'].VlUnitario"]').val(moedaUtils.formatarMoedaSemPrefixo(o.VlUnitario)),$('[name="['+a+'].VlTotalItem"]').text(moedaUtils.formatarMoedaSemPrefixo(o.TotalItem)),$('[name="['+a+'].VlTotalItem"]').val(moedaUtils.formatarMoedaSemPrefixo(o.TotalItem))}(o,t),t++,$("#indice").val(t)}function f(){u(),D(),dadosPagto.tipoFormaPagto,dadosPagto.pedidoAlterado()}function h(o){var a;1==dadosPagto.enumFormaPagto&&(a=$("#opcaoPagtoAvista").children()[0],$("#opcaoPagtoAvista").html(a),$("#opcaoPagtoAvista").formSelect(),$("#meioPagtoAVista").prop("selectedIndex",0),$("#meioPagtoAVista").formSelect()),2==dadosPagto.enumFormaPagto&&(a=$("#opcaoPagtoParcCartaoInternet").children()[0],$("#opcaoPagtoParcCartaoInternet").html(a),$("#opcaoPagtoParcCartaoInternet").formSelect()),3==dadosPagto.enumFormaPagto&&($("#vlEntrada").val(""),$("#meioPagtoEntrada").formSelect(),a=$("#opcaoPagtoParcComEntrada").children()[0],$("#opcaoPagtoParcComEntrada").html(a),$("#opcaoPagtoParcComEntrada").formSelect(),$("#meioPagtoEntradaPrest").prop("selectedIndex",0),$("#meioPagtoEntradaPrest").formSelect()),4==dadosPagto.enumFormaPagto&&(a=$("#opcaoPagtoParcUnica").children()[0],$("#opcaoPagtoParcUnica").html(a),$("#opcaoPagtoParcUnica").formSelect(),$("#meioPagtoParcUnica").prop("selectedIndex",0),$("#meioPagtoParcUnica").formSelect()),5==dadosPagto.enumFormaPagto&&(a=$("#opcaoPagtoParcCartaoMaquineta").children()[0],$("#opcaoPagtoParcCartaoMaquineta").html(a),$("#opcaoPagtoParcCartaoMaquineta").formSelect())}function C(o,a){if(h(),D(),""!=o&&void 0!=o&&null!=o&&0!=o||(o=1),lstProdSelecionados.length>0){if(dadosPagto.enumFormaPagto=o,h(),dadosPagto.qtdeParcVisa=qtdeParcVisa,dadosPagto.permiteRAStatus=permiteRAStatus,dadosPagto.recalcularValoresComCoeficiente(o),""!=dadosPagto.msgErro&&void 0!=dadosPagto.msgErro)return modalError(),(new c.ErrorModal).MostrarMsg(dadosPagto.msgErro),dadosPagto.msgErro="",!1;S(),a||(g(),lstProdSelecionados.forEach(function(o){v(o)})),lstProdSelecionados=dadosPagto.pedidoDto.ListaProdutos,u()}}function S(){1==dadosPagto.enumFormaPagto&&(dadosPagto.lstMsg.forEach(function(o){$("#opcaoPagtoAvista").append("<option selected>"+o+"</option>")}),$("#opcaoPagtoAvista").formSelect()),2==dadosPagto.enumFormaPagto&&(dadosPagto.lstMsg.forEach(function(o){$("#opcaoPagtoParcCartaoInternet").append("<option>"+o+"</option>")}),$("#opcaoPagtoParcCartaoInternet").formSelect()),3==dadosPagto.enumFormaPagto&&(dadosPagto.lstMsg.forEach(function(o){$("#opcaoPagtoParcComEntrada").append("<option>"+o+"</option>")}),$("#opcaoPagtoParcComEntrada").formSelect()),4==dadosPagto.enumFormaPagto&&(dadosPagto.lstMsg.forEach(function(o){$("#opcaoPagtoParcSemEntrada").append("<option>"+o+"</option>")}),$("#opcaoPagtoParcSemEntrada").formSelect()),5==dadosPagto.enumFormaPagto&&(dadosPagto.lstMsg.forEach(function(o){$("#opcaoPagtoParcUnica").append("<option selected>"+o+"</option>")}),$("#opcaoPagtoParcUnica").formSelect()),6==dadosPagto.enumFormaPagto&&(dadosPagto.lstMsg.forEach(function(o){$("#opcaoPagtoParcCartaoMaquineta").append("<option>"+o+"</option>")}),$("#opcaoPagtoParcCartaoMaquineta").formSelect())}function D(){dadosPagto.coeficienteDto=new Array,dadosPagto.pedidoDto=new P.PedidoDto,dadosPagto.pedidoDto.ListaProdutos=new Array,dadosPagto.constantes=new n.Constantes,dadosPagto.moedaUtils=new r.MoedaUtils,dadosPagto.lstMsg=new Array,dadosPagto.coeficienteDto=lstCoeficiente,dadosPagto.pedidoDto.ListaProdutos=lstProdSelecionados}function _(o,a){$("#chkManual").prop("checked");var t=$("#selecaoCd").val();a.NumProduto&&a.Fabricante&&$.ajax({url:"../Produtos/VerificarRegraProdutoCD/",type:"GET",data:{produto:JSON.stringify(a),id_nfe_emitente_selecao_manual:t},dataType:"json",success:function(a){var t,e,r,d;a&&(t=a,e=o,r=new l.ProdutoValidadoComEstoqueDto,(r=t)&&(r.ListaErros.forEach(function(o){if(-1!=o.indexOf("PRODUTO SEM PRESENÇA")){var a=$("."+e).find('[name="produtoAviso"]'),t=a.parent().parent();a.text(o),a.css("color","red"),t.show()}-1!=o.indexOf("define o CD")&&($("#divMsgCD").css("display","block"),$("#msgCD").text(o),r.Produto)}),d=r.Produto,lstprodutos.ProdutoDto.filter(function(o){o.Produto==d.Produto&&o.Fabricante==d.Fabricante&&(o.Estoque=d.Estoque)})))}})}Object.defineProperty(a,"__esModule",{value:!0}),itens=new e.Itens,moedaUtils=new r.MoedaUtils,dadosPagto=new i.DadosPagto,$(".prod").click(function(){$(".prod input").prop("checked",!1),$(this).find("input").prop("checked",!0)}),$("#divCOM").children().find("input").prop("disabled",!0),$("#chkSemRa").prop("checked",!0),$("#chkComRa").click(function(){$("#chkSemRa").prop("checked",!1),$("#chkSemRa").val(0),$("#divCOM").children().find("input").prop("disabled",!1),$("#chkComRa").val(1)}),1==$("#chkSemRa").prop("checked")&&$("#chkSemRa").val(1),0==$("#chkSemRa").prop("checked")&&$("#chkSemRa").val(0),$("#chkSemRa").click(function(){$("#chkComRa").prop("checked",!1),$("#chkComRa").val(0),$("#divCOM").children().find("input").prop("disabled",!0),$("#chkSemRa").val(1)}),1==$("#chkSemRa").prop("checked")&&$("#chkSemRa").val(1),0==$("#chkSemRa").prop("checked")&&$("#chkSemRa").val(0),$("#divIndicadores").children().find("input").prop("disabled",!0),$("#chkSemIndicacao").click(function(){$("#chkComIndicacao").prop("checked",!1),$("#chkComIndicacao").val(0),$("#divIndicadores").children().find("input").prop("disabled",!0),$("#chkSemIndicacao").val(1)}),1==$("#chkComIndicacao").prop("checked")&&($("#divIndicadores").children().find("input").prop("disabled",!1),$("#chkComIndicacao").prop("checked",!0),$("#chkComIndicacao").val(1)),$("#chkComIndicacao").click(function(){$("#chkSemIndicacao").prop("checked",!1),$("#chkSemIndicacao").val(0),$("#divIndicadores").children().find("input").prop("disabled",!1),$("#chkComIndicacao").val(1)}),$("#btnModalProdutos").click(function(){var o=new c.ErrorModal;return 0==$("#chkSemIndicacao").prop("checked")&&0==$("#chkComIndicacao").prop("checked")?(modalError(),o.MostrarMsg("Informe se o pedido é com indicação ou não!"),!1):1!=$("#chkComIndicacao").prop("checked")||"0"!=$("#indicador").val()&&void 0!=$("#indicador").val()?0==$("#chkManual").prop("checked")&&0==$("#chkAutomatico").prop("checked")?(modalError(),o.MostrarMsg("Necessário selecionar o modo de seleção do CD"),!1):1==$("#chkManual").prop("checked")&&"0"==$("#selecaoCd").val()?(modalError(),o.MostrarMsg("É necessário selecionar o CD que irá atender o pedido(sem auto-split)!"),!1):(AbrirModalProdutos(),!0):(modalError(),o.MostrarMsg('Selecione o "indicador"!'),!1)}),$("#divSelecaoCd").children().find("input").prop("disabled",!0),$("#chkAutomatico").click(function(){$("#chkAutomatico").val(1),$("#chkManual").prop("checked",!1),$("#chkManual").val(0),$("#divSelecaoCd").children().find("input").prop("disabled",!0),$("#msgCD").text(""),g(),lstProdSelecionados=new Array,h(!0),u()}),1==$("#chkManual").prop("checked")&&($("#chkManual").val(1),$("#chkManual").prop("checked",!0),$("#chkManual").val(0),$("#divSelecaoCd").children().find("input").prop("disabled",!1),$("#msgCD").text("")),$("#chkManual").click(function(){$("#chkManual").val(1),$("#chkAutomatico").prop("checked",!1),$("#chkAutomatico").val(0),$("#divSelecaoCd").children().find("input").prop("disabled",!1),$("#msgCD").text(""),g(),lstProdSelecionados=new Array,h(!0),u()}),$("#buscaproduto").keyup(function(){var o=$("#buscaproduto").val().toString();$(".tabelaProd tr").hide(),""!=o?$(".prod").filter(function(){return $(this).text().toLowerCase().indexOf(o)>=0&&($(this).show(),$(this).next().hasClass("trfilho")&&($(this).next().show(),$(this).next().next().show())),!0}):$(".tabelaProd tr").show()}),$("#percComissao").keyup(function(){var o=$("#percComissao").val().toString().replace(/\D/g,"");o=(o/100).toFixed(2)+"",$("#percComissao").val(moedaUtils.formatarMoedaSemPrefixo(o))}),$("#selecaoCd").change(function(){$("#msgCD").text(""),g(),lstProdSelecionados=new Array,u()}),window.VerificarPercMaxDescEComissao=function(o){var a=o.value.replace(/\D/g,"");a=(a/100).toFixed(2)+"",o.value=moedaUtils.formatarMoedaSemPrefixo(a);var t="";new s.PercentualMaxDescEComissao;if(percMaxDescEComissaoPorLoja,(a<0||a>100)&&(t="Percentual de comissão inválido."),a>percMaxDescEComissaoPorLoja.PercMaxComissao&&(t="O percentual de comissão excede o máximo permitido."),""!=t)return modalError(),(new c.ErrorModal).MostrarMsg(t),!1},window.InserirProdutoLinha=function(){var o=new t.SelectProdInfo;if(""==$("#qtde").val()||"undefined"==$("#qtde").val())return!1;$(".prod").children().find("input").filter(function(){if(1==$(this).prop("checked")){var a=$(this).parent().parent().parent();return a.children().each(function(){o.Fabricante=a.children()[0].textContent.trim(),o.Produto=a.children()[1].textContent.trim(),o.Qte=parseInt($("#qtde").val().toString()),o.ClicouOk=!0}),!0}}),itens.dtoProdutoCombo=lstprodutos,itens.selectProdInfo=o,itens.pedidoDto=new P.PedidoDto,itens.mostrarProdutos(null),function(){var o=lstProdSelecionados,a=!1,t=itens.pedidoDto.ListaProdutos;o.length>0&&(o.forEach(function(o){t.forEach(function(t){o.Fabricante==t.Fabricante&&o.NumProduto==t.NumProduto&&(o.Qtde++,itens.digitouQte(o),t.Qtde++,itens.digitouQte(t),f(),a=!0)})}),lstProdSelecionados=o);if(a){var e=JSON.stringify(lstProdSelecionados);t.forEach(function(o){var a=e.indexOf(o.NumProduto);a<0&&(o.Desconto=o.Desconto?o.Desconto:0,lstProdSelecionados.push(o))})}else t.forEach(function(o){o.Desconto=o.Desconto?o.Desconto:0,lstProdSelecionados.push(o)})}(),g(),C(null,!1),f(),$(".prod").children().find("input").filter(function(){return 1==$(this).prop("checked")&&$(this).prop("checked",!1),!0}),""!=itens.msgErro&&void 0!=itens.msgErro&&(modalError(),(new c.ErrorModal).MostrarMsg(itens.msgErro))},window.PreparaListaProdutosParaDataList=function(){var o=new Array;return lstprodutos.ProdutoDto.forEach(function(a){o.push(a.Produto)}),o},window.removerLinha=function(o){var a=o.closest("tr"),t=a.className;$("."+t).remove();var e=a.cells[0].children[0].value,r=new Array;r=lstProdSelecionados.filter(function(o){return o.NumProduto==e});var d=lstProdSelecionados.indexOf(r[0]);lstProdSelecionados.splice(d,1);var i=parseInt($("#indice").val().toString());$("#indice").val(i--),f(),u(),h(!1)},window.digitouQtde=function(o){var a=o.parentElement.parentElement.parentElement,t=a.cells[0].children[0].value;lstProdSelecionados=dadosPagto.pedidoDto.ListaProdutos;var e=lstProdSelecionados.filter(function(o){return o.NumProduto==t});e[0].Qtde=parseInt(o.value),itens.digitouQte(e[0]);var r=a.className;!function(o,a,t){o.msgQtdePermitida;var e=$("."+t).find("[name='msgQtdePermitida']");o.qtdeVendaPermitida(a)?(e.text(o.msgQtdePermitida),e.parent().parent().show()):e.parent().parent().hide()}(itens,e[0],r),function(o,a,t){var e=$("."+t).find("[name='estoqueIndisponivel']");o.estoqueExcedido(a)?e.parent().show():e.parent().hide()}(itens,e[0],r),f(),itens.pedidoDto.ListaProdutos=lstProdSelecionados,C(dadosPagto.enumFormaPagto,!0),a.children[7].textContent=moedaUtils.formatarMoedaSemPrefixo(e[0].TotalItem),f()},window.formatarDesc=function(o){var a=o.value.replace(/\D/g,"");a=(a/100).toFixed(2)+"";var t=o.parentElement.parentElement.parentElement.children[0].children[0].value;new Array;lstProdSelecionados.filter(function(o){return o.NumProduto==t}),o.value=moedaUtils.formatarMoedaSemPrefixo(a)},window.formataVlVenda=function(o){var a=o.value.replace(/\D/g,"");a=(a/100).toFixed(2)+"";var t=o.parentElement.parentElement.parentElement.children[0].children[0].value;new Array;lstProdSelecionados.filter(function(o){return o.NumProduto==t}),o.value=moedaUtils.formatarMoedaSemPrefixo(a)},window.digitouDesc=function(o){var a=o.value.replace(/\D/g,"");a=(a/100).toFixed(2)+"";var t=o.parentElement.parentElement.parentElement,e=t.children[0].children[0].value,r=new Array;(r=lstProdSelecionados.filter(function(o){return o.NumProduto==e}))[0].Desconto=a,0==r[0].Desconto||""==r[0].Desconto.toString()?r[0].AlterouVlVenda=!1:r[0].AlterouVlVenda=!0,itens.digitouDescValor(r[0],a),dadosPagto.pedidoDto.ListaProdutos=lstProdSelecionados,C(dadosPagto.enumFormaPagto,!0),u(),t.children[6].children[0].children[0].value=moedaUtils.formatarMoedaSemPrefixo(r[0].VlUnitario)},window.digitouVlVenda=function(o){var a=o.value.replace(/\D/g,"");a=(a/100).toFixed(2)+"",o.value=moedaUtils.formatarMoedaSemPrefixo(a);var t=o.parentElement.parentElement.parentElement,e=t.children[0].children[0].value,r=new Array;(r=lstProdSelecionados.filter(function(o){return o.NumProduto==e}))[0].VlUnitario=parseFloat(a),r[0].VlLista==r[0].VlUnitario?r[0].AlterouVlVenda=!1:r[0].AlterouVlVenda=!0,r[0].Desconto=100*(r[0].Preco-r[0].VlUnitario)/r[0].Preco,r[0].Desconto=parseFloat(r[0].Desconto.toFixed(1)),itens.digitouQte(r[0]),f(),t.children[5].children[0].children[0].value=moedaUtils.formatarMoedaSemPrefixo(r[0].Desconto),t.children[6].children[0].children[0].value=moedaUtils.formatarMoedaSemPrefixo(r[0].VlUnitario),t.children[7].textContent=moedaUtils.formatarMoedaSemPrefixo(r[0].TotalItem),h(!0)},window.digitouPreco=function(o){var a=o.value.replace(/\D/g,"");a=(a/100).toFixed(2)+"",o.value=moedaUtils.formatarMoedaSemPrefixo(a);var t=o.parentElement.parentElement.parentElement,e=t.children[0].children[0].value,r=new Array;(r=lstProdSelecionados.filter(function(o){return o.NumProduto==e}))[0].Preco=parseFloat(a),r[0].Desconto?(r[0].VlUnitario=r[0].Preco*(1-r[0].Desconto/100),r[0].VlUnitario=parseFloat(r[0].VlUnitario.toFixed(2))):r[0].VlUnitario=r[0].Preco,itens.digitouQte(r[0]),f(),t.children[2].children[0].children[0].value=moedaUtils.formatarMoedaSemPrefixo(r[0].Preco),t.children[3].children[0].children[0].value=moedaUtils.formatarPorcentagemUmaCasa(r[0].Desconto),t.children[4].children[0].children[0].value=moedaUtils.formatarMoedaSemPrefixo(r[0].VlUnitario),t.children[5].textContent=moedaUtils.formatarMoedaSemPrefixo(r[0].TotalItem),h(!0)},$("#diasVenc").keyup(function(){$(this).val(this.value.replace(/\D/g,""))}),window.digitouVlEntrada=function(o){var a=o.value.replace(/\D/g,"");if(a=(a/100).toFixed(2)+"",o.value=moedaUtils.formatarMoedaSemPrefixo(a),dadosPagto.vlEntrada=parseFloat(a),dadosPagto.calcularParcelaComEntrada(),""!=dadosPagto.msgErro&&void 0!=dadosPagto.msgErro)return modalError(),(new c.ErrorModal).MostrarMsg(dadosPagto.msgErro),o.value="",dadosPagto.msgErro="",h(!1),$("#enumFormaPagto").prop("selectedIndex",0),$("#enumFormaPagto").formSelect(),!1;var t=$("#opcaoPagtoParcComEntrada").children()[0];$("#opcaoPagtoParcComEntrada").html(t),$("#opcaoPagtoParcComEntrada").formSelect(),S()},novoPedidoDadosService=new d.NovoPedidoDadosService,$("#totalPedido").ready(function(){novoPedidoDadosService.pedidoDto=new P.PedidoDto,novoPedidoDadosService.pedidoDto.ListaProdutos=new Array,novoPedidoDadosService.pedidoDto.ListaProdutos=lstProdSelecionados;var o=$("#totalPedido").val().toString();"0"!=o&&$("#totalPedido").text(o)}),window.recalcularValoresComCoeficiente=function(o){D();var a=parseInt(o.selectedOptions[0].value);p(a),C(a,!1),p(a)},$("#opcaoPagtoParcCartaoInternet").on("change",function(){var o=$("#opcaoPagtoParcCartaoInternet").val().toString();o&&(dadosPagto.opcaoPagtoParcCartaoInternet=o,dadosPagto.RecalcularListaProdutos(),g(),lstProdSelecionados.forEach(function(o){v(o)}),lstProdSelecionados=dadosPagto.pedidoDto.ListaProdutos,u())}),$("#opcaoPagtoParcComEntrada").on("change",function(){var o=$("#opcaoPagtoParcComEntrada").val().toString();o&&(dadosPagto.opcaoPagtoParcCartaoInternet=o,dadosPagto.RecalcularListaProdutos(),g(),lstProdSelecionados.forEach(function(o){v(o)}),lstProdSelecionados=dadosPagto.pedidoDto.ListaProdutos,u())}),$("#opcaoPagtoParcCartaoMaquineta").on("change",function(){var o=$("#opcaoPagtoParcCartaoMaquineta").val().toString();o&&(dadosPagto.opcaoPagtoParcCartaoInternet=o,dadosPagto.RecalcularListaProdutos(),g(),lstProdSelecionados.forEach(function(o){v(o)}),lstProdSelecionados=dadosPagto.pedidoDto.ListaProdutos,u())}),window.continuar=function(){var o=new c.ErrorModal,a=0;return 0==$("#chkSemIndicacao").prop("checked")&&0==$("#chkComIndicacao").prop("checked")?(modalError(),o.MostrarMsg("Informe se o pedido é com ou sem indicação!"),!1):null==dadosPagto.pedidoDto||void 0==dadosPagto.pedidoDto?(modalError(),o.MostrarMsg("Selecione ao menos um produto para continuar."),!1):(dadosPagto.pedidoDto.ListaProdutos.forEach(function(o){itens.qtdeVendaPermitida(o)&&a++}),a>0?(modalError(),void o.MostrarMsg("Produtos com quantidades maiores que a quantidade máxima permitida para venda!")):0===dadosPagto.pedidoDto.ListaProdutos.length?(modalError(),void o.MostrarMsg("Selecione ao menos um produto para continuar.")):(function(){new c.ErrorModal;dadosPagto.pedidoDto.FormaPagtoCriacao=new m.FormaPagtoCriacaoDto,dadosPagto.novoPedidoDadosService=new d.NovoPedidoDadosService,dadosPagto.novoPedidoDadosService.criarNovo(),dadosPagto.pedidoDto.FormaPagtoCriacao=new m.FormaPagtoCriacaoDto,1==dadosPagto.enumFormaPagto&&(dadosPagto.meioPagtoAVista=parseInt($("#meioPagtoAVista").val().toString()),dadosPagto.opcaoPagtoAvista=$("#opcaoPagtoAvista").val().toString());2==dadosPagto.enumFormaPagto&&(dadosPagto.opcaoPagtoParcCartaoInternet=$("#opcaoPagtoParcCartaoInternet").val().toString());3==dadosPagto.enumFormaPagto&&(dadosPagto.meioPagtoEntradaPrest=parseInt($("#meioPagtoEntradaPrest").val().toString()),dadosPagto.meioPagtoEntrada=parseInt($("#meioPagtoEntrada").val().toString()),dadosPagto.diasVenc=parseInt($("#diasVenc").val().toString()),dadosPagto.opcaoPagtoParcComEntrada=$("#opcaoPagtoParcComEntrada").val().toString());dadosPagto.enumFormaPagto;5==dadosPagto.enumFormaPagto&&(dadosPagto.opcaoPagtoParcCartaoInternet=$("#opcaoPagtoParcCartaoInternet").val().toString(),dadosPagto.meioPagtoParcUnica=parseInt($("#meioPagtoParcUnica").val().toString()),dadosPagto.diasVencParcUnica=parseInt($("#diasVencParcUnica").val().toString()));6==dadosPagto.enumFormaPagto&&(dadosPagto.opcaoPagtoParcCartaoMaquineta=$("#opcaoPagtoParcCartaoMaquineta").val().toString())}(),dadosPagto.podeContinuar(!0)?(dadosPagto.novoPedidoDadosService.pedidoDto.FormaPagtoCriacao=dadosPagto.pedidoDto.FormaPagtoCriacao,dadosPagto.novoPedidoDadosService.pedidoDto.ListaProdutos=dadosPagto.pedidoDto.ListaProdutos,$("#lstProdutosSelecionados").val(itens.pedidoDto.ListaProdutos.toString()),!!function(){$("#totalPedido").text().trim();if($("#Tipo_parcelamento").val(dadosPagto.pedidoDto.FormaPagtoCriacao.Tipo_parcelamento),$("#TotalDestePedido").val(moedaUtils.formatarMoedaSemPrefixo(dadosPagto.pedidoDto.VlTotalDestePedido)),1==dadosPagto.enumFormaPagto)return $("#Rb_forma_pagto").val(dadosPagto.pedidoDto.FormaPagtoCriacao.Rb_forma_pagto),$("#Op_av_forma_pagto").val(dadosPagto.pedidoDto.FormaPagtoCriacao.Op_av_forma_pagto),$("#Qtde_Parcelas").val(dadosPagto.pedidoDto.FormaPagtoCriacao.Qtde_Parcelas),!0;if(2==dadosPagto.enumFormaPagto)return $("#Rb_forma_pagto").val(dadosPagto.pedidoDto.FormaPagtoCriacao.Rb_forma_pagto),$("#C_pc_qtde").val(dadosPagto.pedidoDto.FormaPagtoCriacao.C_pc_qtde),$("#C_pc_valor").val(moedaUtils.formatarMoedaSemPrefixo(dadosPagto.pedidoDto.FormaPagtoCriacao.C_pc_valor)),$("#Qtde_Parcelas").val(dadosPagto.pedidoDto.FormaPagtoCriacao.Qtde_Parcelas),!0;if(3==dadosPagto.enumFormaPagto)return $("#Rb_forma_pagto").val(dadosPagto.pedidoDto.FormaPagtoCriacao.Rb_forma_pagto),$("#Op_pce_entrada_forma_pagto").val(dadosPagto.pedidoDto.FormaPagtoCriacao.Op_pce_entrada_forma_pagto),$("#Op_pce_prestacao_forma_pagto").val(dadosPagto.pedidoDto.FormaPagtoCriacao.Op_pce_prestacao_forma_pagto),$("#C_pce_entrada_valor").val(moedaUtils.formatarMoedaSemPrefixo(dadosPagto.pedidoDto.FormaPagtoCriacao.C_pce_entrada_valor)),$("#C_pce_prestacao_qtde").val(dadosPagto.pedidoDto.FormaPagtoCriacao.C_pce_prestacao_qtde),$("#C_pce_prestacao_valor").val(moedaUtils.formatarMoedaSemPrefixo(dadosPagto.pedidoDto.FormaPagtoCriacao.C_pce_prestacao_valor)),$("#C_pce_prestacao_periodo").val(dadosPagto.pedidoDto.FormaPagtoCriacao.C_pce_prestacao_periodo),$("#Qtde_Parcelas").val(dadosPagto.pedidoDto.FormaPagtoCriacao.Qtde_Parcelas),!0;dadosPagto.enumFormaPagto;if(5==dadosPagto.enumFormaPagto)return $("#Rb_forma_pagto").val(dadosPagto.pedidoDto.FormaPagtoCriacao.Rb_forma_pagto),$("#Op_pu_forma_pagto").val(dadosPagto.pedidoDto.FormaPagtoCriacao.Op_pu_forma_pagto),$("#C_pu_valor").val(moedaUtils.formatarMoedaSemPrefixo(dadosPagto.pedidoDto.FormaPagtoCriacao.C_pu_valor)),$("#C_pu_vencto_apos").val(dadosPagto.pedidoDto.FormaPagtoCriacao.C_pu_vencto_apos),$("#Qtde_Parcelas").val(dadosPagto.pedidoDto.FormaPagtoCriacao.Qtde_Parcelas),!0;if(6==dadosPagto.enumFormaPagto)return $("#Rb_forma_pagto").val(dadosPagto.pedidoDto.FormaPagtoCriacao.Rb_forma_pagto),$("#C_pc_maquineta_qtde").val(dadosPagto.pedidoDto.FormaPagtoCriacao.C_pc_maquineta_qtde),$("#C_pc_maquineta_valor").val(moedaUtils.formatarMoedaSemPrefixo(dadosPagto.pedidoDto.FormaPagtoCriacao.C_pc_maquineta_valor)),$("#C_pc_maquineta_qtde").val(dadosPagto.pedidoDto.FormaPagtoCriacao.C_pc_maquineta_qtde),$("#Qtde_Parcelas").val(dadosPagto.pedidoDto.FormaPagtoCriacao.Qtde_Parcelas),!0}()||void 0):""!=dadosPagto.msgErro?(modalError(),o.MostrarMsg(dadosPagto.msgErro),!1):void 0))}});