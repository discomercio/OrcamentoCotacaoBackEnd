define(["require","exports","../../UtilTs/stringUtils/stringUtils","../../UtilTs/CpfCnpjUtils/CpfCnpjUtils","../../UtilTs/Constantes/Constantes","../Shared/Error","../../UtilTs/Loading/Loading"],function(a,i,o,e,n,r,l){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var d=$("#cpf_cnpj").val().toString();$("#cpf_cnpj").val(e.CpfCnpjUtils.cnpj_cpf_formata(d)),$(function(){$("#cepEntrega").mask("00000-000"),$("#cep").mask("00000-000"),$("#ie").mask("000.000.000.000"),$("#telRes").mask("(00) 0000-0000"),$("#celular").blur(function(){14==$("#celular").val().toString().length?$("#celular").mask("(99) 9999-9999"):$("#celular").mask("(99) 99999-9999")}),$("#telCom").mask("(00) 0000-0000"),$("#telCom2").blur(function(){14==$("#telCom2").val().toString().length?$("#telCom2").mask("(99) 9999-9999"):$("#telCom2").mask("(99) 99999-9999")}),$("#addRefComercial").on("click",function(){var a=Number($("#index").val());void 0==a&&(a=0,$("#index").val(a));var i="<hr /><div class='form-group row'>";i+="<div class='col-sm-4' style='text-align: initial;'>",i+="<label class='col-form-label' for='Nome_Empresa'>NOME DA EMPRESA</label>",i+="<input name='["+a+"].Nome_Empresa' id='"+a+"-Nome_Empresa' type='text' class='form-control' />",i+="</div>",i+="<div class='col-sm-4' style='text-align: initial;'>",i+="<label class='col-form-label' for='Contato'>CONTATO</label>",i+="<input name='["+a+"].Contato' id='"+a+"-Contato' type='text' class='form-control'/>",i+="</div>",i+="<div class='col-sm-4' style='text-align: initial;'>",i+="<label class='col-form-label' for='Telefone'>TELEFONE</label>",i+="<input name='["+a+"].Telefone' id='"+a+"-Telefone' type='text' class='form-control' />",i+="</div></div>",$("#collapsible-body-comercial").append(i),$("#"+a+"-Telefone").mask("(00) 0000-0000"),a++,$("#index").val(a)}),$("#0-telBanco").blur(function(){14==$("#0-telBanco").val().toString().length?$("#0-telBanco").mask("(99) 9999-9999"):$("#0-telBanco").mask("(99) 99999-9999")}),$("#addRefBancaria").on("click",function(){return $("#RefBancariabody-0").is(":visible")?(swal("Erro","Máximo de 1 referência bancária."),!1):($("#RefBancariabody-0").show(),void $("#RefBancariabody-0").css("display","inline-flex"))}),"PF"==$("#tipo").val()&&Number($("#produtor").val())==n.Constantes.COD_ST_CLIENTE_PRODUTOR_RURAL_SIM&&($("#div_ie").css("visibility","visible"),$("#div_contribuinte").css("visibility","visible"))}),$("#nome").blur(function(){var a;""==$("#nome").val()&&$("#nome").addClass("is-invalid"),(null===(a=$("#nome").val())||void 0===a?void 0:a.toString().length)>0&&""!=$("#nome").val()&&$("#nome").removeClass("is-invalid")}),$("#cpf_cnpj").blur(function(){var a;""==$("#cpf_cnpj").val()&&$("#cpf_cnpj").addClass("is-invalid"),(null===(a=$("#cpf_cnpj").val())||void 0===a?void 0:a.toString().length)>0&&""!=$("#cpf_cnpj").val()&&$("#cpf_cnpj").removeClass("is-invalid")}),$("#nascimento").blur(function(){var a,i;if(new Date(null===(a=$("#nascimento").val())||void 0===a?void 0:a.toString()).getTime())return $("#nascimento").removeClass("is-invalid"),!1;$("#nascimento").addClass("is-invalid"),new Date(null===(i=$("#nascimento").val())||void 0===i?void 0:i.toString()).getTime()&&$("#nascimento").removeClass("is-invalid")}),$("#cep").blur(function(){var a;""==$("#cep").val()&&$("#cep").addClass("is-invalid"),(null===(a=$("#cep").val())||void 0===a?void 0:a.toString().length)>0&&""!=$("#cep").val()&&$("#cep").removeClass("is-invalid")}),$("#cep").blur(function(){var a;""==$("#cep").val()&&$("#cep").addClass("is-invalid"),(null===(a=$("#cep").val())||void 0===a?void 0:a.toString().length)>0&&""!=$("#cep").val()&&$("#cep").removeClass("is-invalid")}),$("#numero").blur(function(){var a;""==$("#numero").val()&&$("#numero").addClass("is-invalid"),(null===(a=$("#numero").val())||void 0===a?void 0:a.toString().length)>0&&""!=$("#numero").val()&&$("#numero").removeClass("is-invalid")}),$("#bairro").blur(function(){var a;""==$("#bairro").val()&&$("#bairro").addClass("is-invalid"),(null===(a=$("#bairro").val())||void 0===a?void 0:a.toString().length)>0&&""!=$("#bairro").val()&&$("#bairro").removeClass("is-invalid")}),$("#cidade").blur(function(){var a;""==$("#cidade").val()&&$("#cidade").addClass("is-invalid"),(null===(a=$("#cidade").val())||void 0===a?void 0:a.toString().length)>0&&""!=$("#cidade").val()&&$("#cidade").removeClass("is-invalid")}),$("#uf").blur(function(){var a;""==$("#uf").val()&&$("#uf").addClass("is-invalid"),(null===(a=$("#uf").val())||void 0===a?void 0:a.toString().length)>0&&""!=$("#uf").val()&&$("#uf").removeClass("is-invalid")}),$("#email").blur(function(){var a;""==$("#email").val()&&$("#email").addClass("is-invalid"),(null===(a=$("#email").val())||void 0===a?void 0:a.toString().length)>0&&""!=$("#email").val()&&$("#email").removeClass("is-invalid")}),$("#emailXml").blur(function(){var a;""==$("#emailXml").val()&&$("#emailXml").addClass("is-invalid"),(null===(a=$("#emailXml").val())||void 0===a?void 0:a.toString().length)>0&&""!=$("#emailXml").val()&&$("#emailXml").removeClass("is-invalid")}),$("#produtor").change(function(){var a;""==$("#produtor").val()&&$("#produtor").addClass("is-invalid"),(null===(a=$("#produtor").val())||void 0===a?void 0:a.toString().length)>0&&""!=$("#produtor").val()&&$("#produtor").removeClass("is-invalid")}),window.MostrarDivs=function(){Number($("#produtor").val())==n.Constantes.COD_ST_CLIENTE_PRODUTOR_RURAL_SIM&&($("#div_ie").css("visibility","visible"),$("#div_contribuinte").css("visibility","visible")),Number($("#produtor").val())!=n.Constantes.COD_ST_CLIENTE_PRODUTOR_RURAL_SIM&&($("#div_ie").css("visibility","hidden"),$("#div_contribuinte").css("visibility","hidden"))},window.DigitouCepCadastro=function(){null!=$("#cep").val()&&$.ajax({url:"../Cep/BuscarCep/",type:"GET",data:{cep:$("#cep").val()},dataType:"json",success:function(a){""!=a[0].Endereco?($("#endereco").prop("readonly",!0),$("#endereco").val(a[0].Endereco),$("#lbEntrega").addClass("active")):$("#enderecoEntrega").prop("readonly",!1),""!=a[0].Bairro?($("#bairro").prop("readonly",!0),$("#bairro").val(a[0].Bairro),$("#lblBairro").addClass("active")):$("#bairro").prop("readonly",!1),""!=a[0].Cidade?($("#cidade").prop("readonly",!0),$("#cidade").val(a[0].Cidade),$("#lblCidade").addClass("active")):$("#cidade").prop("readonly",!1),""!=a[0].Uf?($("#uf").prop("readonly",!0),$("#uf").val(a[0].Uf),$("#lblUf").addClass("active")):$("#uf").prop("readonly",!1),""!=a[0].logradouroComplemento&&"undefined"!=a[0].logradouroComplemento&&null!=a[0].logradouroComplemento&&($("#complemento").val(a[0].LogradouroComplemento),$("#lblComplemento").addClass("active")),$("#numero").val(""),$("#complemento").val("")},error:function(a){swal("Erro","Falha ao buscar o cep!")}})},window.ValidarFormulario=function(){l.Loading.Carregando(!0);var a,i=new r.ErrorModal,n="";if("True"==$("#permiteEditar").val()){if(e.CpfCnpjUtils.cnpj_cpf_ok(e.CpfCnpjUtils.cnpj_cpf_formata(d))&&(""==$("#cpf_cnpj").val()&&($("#cpf_cnpj").addClass("is-invalid"),n+="Favor informar CPF ou CNPJ<br>"),""==$("#nome").val()&&($("#nome").addClass("is-invalid"),n+="Favor informar nome do cliente<br>"),""==$("#nascimento").val()&&($("#nascimento").addClass("is-invalid"),n+="Favor informar nascimento<br>"),""==$("#sexo").val()&&(n+="Favor informar sexo<br>"),""==$("#telRes").val()&&""==$("#celular").val()&&""==$("#telCom").val()&&($("#telRes").addClass("is-invalid"),$("#celular").addClass("is-invalid"),$("#telCom").addClass("is-invalid"),n+="Favor preencher ao menos um número de telefone!<br>"),""==$("#email").val()&&($("#email").addClass("is-invalid"),n+="Favor informar e-mail!<br>"),n.length>0))return l.Loading.Carregando(!1),n="<b>Preencha os campos marcados como obrigatório:</b><br>"+n,i.ModalInnerHTML(n),!1;if(14==d.length&&(""==$("#razao").val()&&($("#razao").addClass("is-invalid"),n+="Favor informar Razão Social!<br>"),""==$("#cpf_cnpj").val()&&($("#cpf_cnpj").addClass("is-invalid"),n+="Favor informar CNPJ!<br>"),""==$("#telCom").val()&&""==$("#telCom2").val()&&""==$("#celular").val()&&($("#telCom").addClass("is-invalid"),$("#telCom2").addClass("is-invalid"),$("#celular").addClass("is-invalid"),n+="Favor informar ao menos um número de telefone!<br>"),n.length>0))return l.Loading.Carregando(!1),n="<b>Preencha os campos marcados como obrigatório:</b><br>"+n,i.ModalInnerHTML(n),!1;if(""==$("#cep").val()&&($("#cep").addClass("is-invalid"),n+="Favor informar cep<br>"),""==$("#endereco").val()&&($("#endereco").addClass("is-invalid"),n+="Favor informar endereco!<br>"),""==$("#numero").val()&&($("#numero").addClass("is-invalid"),n+="Favor informar número!<br>"),""==$("#bairro").val()&&($("#bairro").addClass("is-invalid"),n+="Favor informar bairro!<br>"),""==$("#cidade").val()&&($("#cidade").addClass("is-invalid"),n+="Favor informar cidade!<br>"),""==$("#uf").val()&&($("#uf").addClass("is-invalid"),n+="Favor informar UF!<br>"),n.length>0)return l.Loading.Carregando(!1),n="<b>Preencha os campos marcados como obrigatório:</b><br>"+n,i.ModalInnerHTML(n),!1}else d=o.StringUtils.retorna_so_digitos($("#cpf_cnpj").text());if(a=function(a){var i,e,n=!0,d=new r.ErrorModal,s="",t=null===(i=$("#ie").val())||void 0===i?void 0:i.toString(),v=$("#produtor").val().toString(),c=null===(e=$("#contribuinte"))||void 0===e?void 0:e.val().toString();if(11==a.length){if(""==v&&($("#produtor").addClass("is-invalid"),s+="Informe se o cliente é produtor rural ou não!<br>",n=!1),"1"!=v&&"2"!=v&&($("#produtor").addClass("is-invalid"),s+="Informe se o cliente é produtor rural ou não!<br>",n=!1),"2"==v&&("1"!=c&&"2"!=c&&"3"!=c&&($("#contribuinte").addClass("is-invalid"),s+="Informe se o cliente é contribuinte do ICMS, não contribuinte ou isento!<br>",n=!1),"1"==c&&""==t.trim()&&($("#contribuinte").addClass("is-invalid"),s="Se o cliente é contribuinte do ICMS a inscrição estadual deve ser preenchida!<br>",n=!1),"1"==c&&t&&t.toUpperCase().indexOf("ISEN")>=0&&($("#contribuinte").addClass("is-invalid"),s+="Se cliente é não contribuinte do ICMS, não pode ter o valor ISENTO no campo de Inscrição Estadual!<br>",n=!1),"2"==c&&t.toUpperCase().indexOf("ISEN")>=0&&($("#contribuinte").addClass("is-invalid"),s+="Se cliente é contribuinte do ICMS, não pode ter o valor ISENTO no campo de Inscrição Estadual!<br>",n=!1)),s.length>0)return l.Loading.Carregando(!1),s="<b>Preencha os campos marcados como obrigatório: </b><br>"+s,d.ModalInnerHTML(s),n}else if(t=o.StringUtils.retorna_so_digitos(t),"0"!=c&&"1"!=c&&"2"!=c&&"3"!=c&&($("#contribuinte").addClass("is-invalid"),s+="Informe se o cliente é contribuinte do ICMS, não contribuinte ou isento!<br>",n=!1),"2"==c&&""==t&&($("#ie").addClass("is-invalid"),s+="Se o cliente é contribuinte do ICMS a inscrição estadual deve ser preenchida!<br>",n=!1),"1"==c&&""!=t&&($.isNumeric(t)||t.toUpperCase().indexOf("ISEN")>=0&&($("#ie").addClass("is-invalid"),s+="Se cliente é não contribuinte do ICMS, não pode ter o valor ISENTO no campo de Inscrição Estadual!<br>",n=!1)),"2"==c&&""!=t&&($.isNumeric(t)||t.toUpperCase().indexOf("ISEN")>=0&&($("#ie").addClass("is-invalid"),s+="Se cliente é contribuinte do ICMS, não pode ter o valor ISENTO no campo de Inscrição Estadual!<br>",n=!1)),s.length>0)return l.Loading.Carregando(!1),s="<b>Preencha os campos marcados como obrigatório: </b><br>"+s,d.ModalInnerHTML(s),n;11==a.length?v&&"1"!=v&&"3"==c&&t&&""!=t&&($("#ie").addClass("is-invalid"),s+="Se o Contribuinte ICMS é isento, o campo IE deve ser vazio!<br>",n=!1):"3"==c&&t&&""!=t&&($("#ie").addClass("is-invalid"),s="Se o Contribuinte ICMS é isento, o campo IE deve ser vazio!<br>",n=!1);if(s.length>0)return l.Loading.Carregando(!1),s="<b>Preencha os campos marcados como obrigatório: </b><br>"+s,d.ModalInnerHTML(s),n;return n}(d)){if($("#indicador").val()&&"undefined"!=$("#indicador").val()&&"0"!=$("#indicador").val()||($("#indicador").addClass("is-invalid"),n+="Favor selecionar um indicador!<br>"),n.length>0)return l.Loading.Carregando(!1),i.ModalInnerHTML(n),!1;$("#outro").prop("checked")&&($("#outro").val("true"),a=function(){var a=new r.ErrorModal,i="",o=$("#cepEntrega").val().toString(),e=$("#enderecoEntrega").val().toString(),n=$("#numEntrega").val().toString(),d=$("#ufEntrega").val().toString(),s=$("#cidadeEntrega").val().toString(),t=$("#justificativa").val().toString();o&&""!==d&&""!==s||($("#cepEntrega").addClass("is-invalid"),i+="Caso seja selecionado outro endereço, informe um CEP válido!<br>");""===e&&($("#enderecoEntrega").addClass("is-invalid"),i+="Caso seja selecionado outro endereço, informe um endereço!<br>");""===t&&($("#justificativa").addClass("is-invalid"),i+="Caso seja selecionado outro endereço, selecione a justificativa do endereço de entrega!<br>");""===n&&($("#numEntrega").addClass("is-invalid"),i+="Caso seja selecionado outro endereço, preencha o número do endereço de entrega!<br>");if(i.length>0)return l.Loading.Carregando(!1),i="<b>Preencha os campos marcados como obrigatório: </b><br>"+i,a.ModalInnerHTML(i),!1}())}return a}});